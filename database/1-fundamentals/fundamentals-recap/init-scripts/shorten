CREATE TABLE customers(id SERIAL PRIMARY KEY, first_name VARCHAR(50) NOT NULL, last_name VARCHAR(50) NOT NULL, email VARCHAR(100) UNIQUE NOT NULL, phone VARCHAR(20) NOT NULL, address TEXT NOT NULL, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
CREATE TABLE accounts(id SERIAL PRIMARY KEY, customer_id INT NOT NULL, account_type VARCHAR(20) CHECK (account_type IN ('checking', 'savings')) NOT NULL, balance DECIMAL(15, 2) NOT NULL DEFAULT 0.00, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (customer_id) REFERENCES customers (id) ON DELETE CASCADE);
CREATE TABLE transactions(id SERIAL PRIMARY KEY, account_id INT NOT NULL REFERENCES accounts (id) ON DELETE CASCADE, transaction_type VARCHAR(20) CHECK (transaction_type IN ('deposit', 'withdrawal', 'transfer')) NOT NULL, amount DECIMAL(15, 2) NOT NULL, transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP, target_account_id INT REFERENCES accounts (id) ON DELETE SET NULL);